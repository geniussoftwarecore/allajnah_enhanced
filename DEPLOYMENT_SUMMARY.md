# ููุฎุต ุฅุนุฏุงุฏ Docker ูุงููุดุฑ

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ูููุงุช Docker

ุชู ุฅูุดุงุก ุงููููุงุช ุงูุชุงููุฉ ูุฏุนู Docker:

#### ุฃ. Dockerfile.backend
- ุงุณุชุฎุฏุงู Python 3.11-slim ููุญุฌู ุงูุฃุตุบุฑ
- ุชุซุจูุช PostgreSQL client ููุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุดุบูู gunicorn ูุน 4 workers
- Health check ููุชุฃูุฏ ูู ุตุญุฉ ุงูุชุดุบูู
- ุชุดุบูู ุจูุณุชุฎุฏู ุบูุฑ root ููุฃูุงู

#### ุจ. Dockerfile.frontend  
- Multi-stage build (builder + production)
- ุงุณุชุฎุฏุงู Node 22 ููุจูุงุก
- ุงุณุชุฎุฏุงู Nginx 1.27-alpine ููุฅูุชุงุฌ
- ุญุฌู ุงูุตูุฑุฉ ุงูููุงุฆูุฉ ~50MB ุจุฏูุงู ูู ~1GB
- ุชุดุบูู ุจูุณุชุฎุฏู ุบูุฑ root

#### ุฌ. nginx.conf
- ุฅุนุฏุงุฏุงุช ุงูุฃูุงู (X-Content-Type-Options, X-Frame-Options, X-XSS-Protection)
- ุชูุนูู gzip compression
- SPA routing support (try_files)
- Caching ูููููุงุช ุงูุซุงุจุชุฉ (1 ุณูุฉ)
- Proxy ููู API ุฅูู http://api:8000

#### ุฏ. docker-compose.yml
ูุญุชูู ุนูู 4 ุฎุฏูุงุช:
1. **db**: PostgreSQL 15-alpine
2. **minio**: MinIO ูุชุฎุฒูู ุงููููุงุช (ุงุฎุชูุงุฑู)
3. **api**: Flask Backend (Port 8000)
4. **web**: React Frontend via Nginx (Port 5173)

### 2. ุณูุฑุจุชุงุช ุงูุชููุฆุฉ

#### ุฃ. seed_data.py
ุณูุฑุจุช ูุฅูุดุงุก:
- **ูุณุชุฎุฏู ุฅุฏุงุฑู ุงูุชุฑุงุถู**:
  - Email: admin@example.com
  - Password: ChangeMe123!
  - Role: Higher Committee

- **ุทุฑููุชูู ููุฏูุน ููุงุฎุชุจุงุฑ**:
  1. ูุญูุธุฉ ูุงู ุจูู (777123456)
  2. ุญุณุงุจ ุจูู ุงูุชุถุงูู ุงูุฅุณูุงูู (1234567890)

### 3. ุงูุชุนุฏููุงุช ุนูู ุงูููุฏ ุงูุญุงูู

#### ุฃ. complaints_backend/src/main.py
- ุฅุถุงูุฉ ุฏุนู PostgreSQL ูู ูุชุบูุฑ ุงูุจูุฆุฉ DATABASE_URL
- ุงูุงุญุชูุงุธ ุจุฏุนู SQLite ููุชุทููุฑ ุงููุญูู
- ุฅุถุงูุฉ pool settings ูู PostgreSQL

#### ุจ. complaints_backend/src/init_data.py
- ุฏุนู ูุชุบูุฑ ุงูุจูุฆุฉ DATABASE_URL
- ุฏุนู ูุชุบูุฑ ุงูุจูุฆุฉ SESSION_SECRET

### 4. ูููุงุช ุงูุฏุนู

- **.dockerignore**: ูุชุฌูุจ ูุณุฎ ูููุงุช ุบูุฑ ุถุฑูุฑูุฉ
- **test_docker_build.sh**: ุณูุฑุจุช ุงุฎุชุจุงุฑ ุงูุฅุนุฏุงุฏ
- **DOCKER_DEPLOYMENT.md**: ุฏููู ุดุงูู ูููุดุฑ
- **DOCKER_QUICKSTART.md**: ุฏููู ุงูุจุฏุก ุงูุณุฑูุน

## ๐ ุงูุฃูุงู

ุชู ุชุทุจูู ุฃูุถู ููุงุฑุณุงุช ุงูุฃูุงู:

โ **Container Security**
- ุชุดุบูู ุงูุฎุฏูุงุช ุจูุณุชุฎุฏู ุบูุฑ root
- Multi-stage builds ูุชูููู ุณุทุญ ุงููุฌูู
- Health checks ูููุฑุงูุจุฉ

โ **Application Security**
- CORS ูุญุฏูุฏ ุจู origins ูุนููุฉ
- Secret keys ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- Password hashing ุจุงุณุชุฎุฏุงู werkzeug

โ **Database Security**
- ูููุงุช ูุฑูุฑ ูููุฉ
- Pool pre-ping ููุชุฃูุฏ ูู ุงูุงุชุตุงูุงุช
- ุจูุงูุงุช ูุญููุธุฉ ูู volumes

## ๐ฆ ุงูุจููุฉ ุงููุนูุงุฑูุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Docker Host                    โ
โ                                             โ
โ  โโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโ  โ
โ  โ   Nginx      โโโโโโโโโค   Browser    โ  โ
โ  โ (Port 5173)  โ       โ              โ  โ
โ  โโโโโโโโฌโโโโโโโโ       โโโโโโโโโโโโโโโโ  โ
โ         โ                                   โ
โ         โ /api proxy                        โ
โ         โผ                                   โ
โ  โโโโโโโโโโโโโโโโ                          โ
โ  โ   Flask API  โ                          โ
โ  โ (Port 8000)  โ                          โ
โ  โโโโโโโโฌโโโโโโโโ                          โ
โ         โ                                   โ
โ    โโโโโโดโโโโโฌโโโโโโโโโโโโโโ              โ
โ    โผ         โผ             โผ               โ
โ  โโโโโโ  โโโโโโโโ    โโโโโโโโโโ          โ
โ  โ DB โ  โMinIO โ    โ Uploadsโ          โ
โ  โ5432โ  โ 9000 โ    โ Volume โ          โ
โ  โโโโโโ  โโโโโโโโ    โโโโโโโโโโ          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ุฎุทูุงุช ุงููุดุฑ

### ุงูุชุทููุฑ ุงููุญูู (Replit)
```bash
# ูุนูู ุญุงููุงู ุจุฏูู ุชุบููุฑ
gunicorn --bind 0.0.0.0:8000 --reuse-port --reload main:app & 
cd complaints_frontend && pnpm run dev
```

### ุงููุดุฑ ุจุงุณุชุฎุฏุงู Docker
```bash
# 1. ุจูุงุก ูุชุดุบูู ุงูุฎุฏูุงุช
docker-compose up --build -d

# 2. ุชููุฆุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
docker-compose exec api python complaints_backend/src/init_data.py

# 3. ุฅูุดุงุก ุงููุณุชุฎุฏู ุงูุฅุฏุงุฑู ูุทุฑู ุงูุฏูุน
docker-compose exec api python seed_data.py

# 4. ุงููุตูู ุฅูู ุงููุธุงู
# Frontend: http://localhost:5173
# API: http://localhost:8000/api
```

## โ ุงูุงุฎุชุจุงุฑุงุช

### 1. ุงุฎุชุจุงุฑ ุฅุนุฏุงุฏุงุช Docker
```bash
./test_docker_build.sh
```

### 2. ุงุฎุชุจุงุฑ ุงูุจูุงุก
```bash
# ุงุฎุชุจุงุฑ ุจูุงุก Backend
docker build -f Dockerfile.backend -t complaints-api .

# ุงุฎุชุจุงุฑ ุจูุงุก Frontend
docker build -f Dockerfile.frontend -t complaints-web .
```

### 3. ุงุฎุชุจุงุฑ docker-compose
```bash
docker-compose config
```

## ๐ ุงูุชูุงูู ูุน ุงูููุฏ ุงูุญุงูู

โ **ูุง ููุฌุฏ ูุณุฑ ููุณููู ุงููุงุฆู**:
- ุงูููุฏ ูุนูู ุจุฏูู Docker ููุง ูู
- SQLite ููุณุชุฎุฏู ูุญููุงู ุฅุฐุง ูู ูุชู ุชุนููู DATABASE_URL
- ุฌููุน ุงูู routes ูุงููุธุงุฆู ุชุนูู ุจุฏูู ุชุบููุฑ
- Frontend ูุนูู ูุน vite dev server ูุญููุงู

## ๐ ุงูููุงุฑูุฉ

| ุงูููุฒุฉ | ูุจู Docker | ุจุนุฏ Docker |
|--------|-----------|------------|
| ูุงุนุฏุฉ ุงูุจูุงูุงุช | SQLite | PostgreSQL |
| ุชุฎุฒูู ุงููููุงุช | ูุญูู | MinIO (ุงุฎุชูุงุฑู) |
| Frontend Server | Vite Dev | Nginx Production |
| Backend Server | Gunicorn | Gunicorn (container) |
| ูุงุจููุฉ ุงูุชูุณุน | ูุญุฏูุฏุฉ | ุนุงููุฉ |
| ุณูููุฉ ุงููุดุฑ | ูุฏูู | ุขูู |
| ุงูุนุฒู | ูุง ููุฌุฏ | ูุงูู |

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุชุทููุฑ ุงููุญูู**: ุงูููุฏ ุงูุญุงูู ูุนูู ุจุฏูู ุฃู ุชุบููุฑ
2. **Docker ุงุฎุชูุงุฑู**: ูููู ุงุณุชุฎุฏุงู Docker ูููุดุฑ ููุท
3. **ุงูุจูุงูุงุช**: ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ูู volumes
4. **ุงูุฃูุงู**: ูุฌุจ ุชุบููุฑ ุฌููุน ูููุงุช ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ ูู ุงูุฅูุชุงุฌ
5. **MinIO**: ุงุฎุชูุงุฑูุ ูููู ุฅุฒุงูุชู ุฅุฐุง ูู ุชูู ููุงู ุญุงุฌุฉ ูุชุฎุฒูู ุงููููุงุช

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุชุฑุญุฉ

1. ุงุฎุชุจุงุฑ Docker locally
2. ุฅุถุงูุฉ CI/CD pipeline
3. ุฅุนุฏุงุฏ monitoring (Prometheus/Grafana)
4. ุฅุถุงูุฉ backups ุขููุฉ
5. ุฅุนุฏุงุฏ SSL certificates ููุฅูุชุงุฌ
6. ุชูุซูู APIs ุจุงุณุชุฎุฏุงู Swagger

## ๐ ุงูุฏุนู

ูููุฒูุฏ ูู ุงููุนูููุงุช:
- **ุฏููู ุดุงูู**: `DOCKER_DEPLOYMENT.md`
- **ุจุฏุก ุณุฑูุน**: `DOCKER_QUICKSTART.md`
- **ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช**: `DATABASE_SCHEMA.md`
- **ุณูุฑุจุช ุงูุงุฎุชุจุงุฑ**: `./test_docker_build.sh`

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2025-10-05  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุฅูุชุงุฌ
